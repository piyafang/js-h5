<!DOCTYPE HTML>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>无标题文档</title>
<style>
*{margin:0; padding:0; list-style:none;}
#box{width:840px;height:305px; margin:100px auto; -overflow:hidden; position:relative; top:0; left:0;}
#box ul{position:absolute;top:0; left:0;}
#box ul li{float:left;width:840px; height:305px;}
#box p{overflow:hidden; position:absolute; bottom:50px; right:100px; width:160px; }
#box span{float:left; width: 30px; height:30px; background:#ccc; border-radius:50%; margin-right:10px;}
#box span.on{background:#f90;}
</style>
<script src="move-json4.js"></script>
<script>
	window.onload=function(){
		var oBox=document.getElementById('box');
		var oUl = oBox.getElementsByTagName('ul')[0];
		var aLi = oUl.children;
		var oP = oBox.getElementsByTagName('p')[0];
		var aBtn = oP.children;
		
		oUl.style.width=aLi.length*aLi[0].offsetWidth+'px';
		
		for(var i=0;i<aBtn.length;i++){
			(function(index){
				aBtn[i].onmouseover=function(){
					for(var i=0;i<aBtn.length;i++){
						aBtn[i].className='';
					}
					this.className='on';
				}
					clearInterval(oUl.timer);
					function controlMove(){
						startMove(oUl,{'left':-index*840},{'type':'ease-out','time':3000})
					}
					controlMove();
					if(index==aBtn.length-1){
						index=1;
					}
					
					oUl.timer=setInterval(controlMove,700);
					
					
				
			}) (i);
		}
		
	};
</script>
</head>

<body>
	<div id="box">
		<ul>
			<li><img src="img/0.jpg" /></li>
			<li><img src="img/1.jpg" /></li>
			<li><img src="img/2.jpg" /></li>
			<li><img src="img/3.jpg" /></li>
		</ul>
		<p><span class="on"></span><span></span><span></span><span></span></p>
	</div>
</body>
</html>
